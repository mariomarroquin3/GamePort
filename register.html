<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro | GamePort</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-light">

    <nav class="navbar navbar-expand-lg navbar-dark bg-gradient-primary shadow-sm">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="index.html">
                <img src="icons/logo.jpeg" alt="Logo" class="me-2 rounded-circle bg-white" style="width: 40px; height: 40px;">
                <span class="fw-bold fs-4">GamePort</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="sobre_nosotros.html">Sobre Nosotros</a>
                    </li>
                </ul>
                <div class="d-flex align-items-center">
                    <button id="darkModeToggle" class="btn btn-outline-light me-3" aria-label="Modo oscuro">
                        <i class="bi bi-moon"></i>
                    </button>
                    <button class="btn btn-outline-light" type="button" data-bs-toggle="offcanvas" data-bs-target="#userMenuOffcanvas" aria-controls="userMenuOffcanvas">
                        <span class="bi bi-person-circle fs-4"></span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Offcanvas menú de usuario -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="userMenuOffcanvas" aria-labelledby="userMenuLabel">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="userMenuLabel">Usuario</h5>
            <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Cerrar"></button>
        </div>
        <div class="offcanvas-body">
            <ul class="list-group">
                <li class="list-group-item login-item">
                    <a class="nav-link" href="register.html"><i class="bi bi-person-plus me-2"></i>Registrarse</a>
                </li>
                <li class="list-group-item login-item">
                    <a class="nav-link" href="login.html"><i class="bi bi-box-arrow-in-right me-2"></i>Iniciar Sesión</a>
                </li>
                <li class="list-group-item user-info d-none">
                    <span id="userScore">0</span> puntos
                </li>
                <li class="list-group-item">
                    <a class="nav-link" href="profile.html"><i class="bi bi-person-circle me-2"></i>Mi Perfil</a>
                </li>
                <li class="list-group-item">
                    <a class="nav-link" href="https://mariomarroquin3.github.io/To-do/"><i class="bi bi-trophy me-2"></i>Mis tareas</a>
                </li>
                <li class="list-group-item">
                <button id="logoutBtn" class="nav-link"><i class="bi bi-box-arrow-right me-2"></i>Cerrar Sesión</button>
            </li>
            </ul>
            
        </div>
    </div>
    
    <div class="container d-flex flex-column justify-content-center align-items-center min-vh-100">
        <div class="card shadow-lg p-4" style="max-width: 400px; width: 100%;">
            <h2 class="mb-4 text-gradient fw-bold text-center">Registro</h2>
            <form id="registerForm" novalidate>
                <div class="mb-3">
                    <label for="username" class="form-label">Usuario</label>
                    <input type="text" class="form-control" id="username" name="username" required minlength="3">
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Correo electrónico</label>
                    <input type="email" class="form-control" id="email" name="email" required>
                </div>
                <div class="mb-3">
                    <label for="password" class="form-label">Contraseña</label>
                    <input type="password" class="form-control" id="password" name="password" required minlength="6">
                </div>
                <button type="submit" class="btn btn-primary w-100">Registrarse</button>
                <div id="registerMsg" class="mt-3 text-center"></div>
            </form>
            <div class="mt-3 text-center">
                <a href="login.html">¿Ya tienes cuenta? Inicia sesión</a>
            </div>
        </div>
    </div>
    
    <footer class="footer-game-portal">
    <div class="container-footer">
        
        <div class="legal-section">
            <h4 class="section-title">Legal y Empresa</h4>
            <div class="links-container">
                <p><a href="condiciones.html">Términos y Condiciones</a></p>
                <p><a href="privacidad.html">Política de Privacidad</a></p>
                <p><a href="nosotros.html">Trabaja con Nosotros</a></p>
                <p>&copy; 2025 GamePort Módulo 8</p>
            </div>
        </div>

        <div class="social-section">
            <a href="https://www.facebook.com/gameport11/" target="_blank" class="social-icon">
                <img src="icons/fb.png" alt="Facebook">
            </a>
            <a href="https://www.instagram.com/gameport_11?igsh=MW5ldnIzODI0dnl6Mw==" target="_blank" class="social-icon">
                <img src="icons/ig.png" alt="Instagram">
            </a>
            <a href="URL_TWITTER_X" target="_blank" class="social-icon">
                <img src="icons/X.png" alt="Twitter/X">
            </a>
            <a href="URL_YOUTUBE" target="_blank" class="social-icon">
                <img src="icons/YT.png" alt="YouTube">
            </a>
        </div>

        <div class="info-section">
            <h4 class="portal-name">GamePort</h4>
            <p>¿Necesitas ayuda con tu cuenta o un juego?</p>
            <p><strong>Horario de Soporte:</strong> Lunes a Sábado, 9:00 a.m. a 6:00 p.m. (GMT-6)</p>
            <p class="contact-info">
                <a>Envía un correo a <a href="mailto:soporte@tudominio.com">soporte@tudominio.com</a>
            </p>
        </div>

    </div>
</footer>

    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <script>
    document.getElementById('registerForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const username = document.getElementById('username').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;

        const msg = document.getElementById('registerMsg');
        msg.textContent = '';
        msg.className = '';

        if (!username || !email || !password) {
            msg.textContent = 'Completa todos los campos.';
            msg.className = 'text-danger';
            return;
        }

        try {
            const res = await fetch('/api/register', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ username, email, password })
            });
            const data = await res.json();
            if (res.ok) {
                msg.textContent = '¡Registro exitoso!';
                msg.className = 'text-success';
                // Elimina o comenta la redirección:
                setTimeout(() => window.location.href = 'login.html', 1500);
            } else {
                msg.textContent = data.message || 'Error en el registro.';
                msg.className = 'text-danger';
            }
        } catch (err) {
            msg.textContent = 'No se pudo conectar con el servidor.';
            msg.className = 'text-danger';
        }
    });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
</html>